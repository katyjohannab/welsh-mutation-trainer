/* ===== Learn mode flip card (robust) ===== */
.learn-scene { perspective: 1200px; }

/* 3D container */
.learn-card3d{
  display: grid;
  grid-template-columns: 1fr;
  grid-template-rows: 1fr;

  position: relative;
  transform-style: preserve-3d;
  -webkit-transform-style: preserve-3d;

  transition: transform 600ms cubic-bezier(.2,.8,.2,1);
  will-change: transform;
}
.learn-card3d.is-flipped{ transform: rotateY(180deg); }

/* Force BOTH faces into the same single grid cell (prevents stacking) */
.learn-face{
  grid-column: 1 / 2;
  grid-row: 1 / 2;

  backface-visibility: hidden;
  -webkit-backface-visibility: hidden;

  transform-style: preserve-3d;
  -webkit-transform-style: preserve-3d;
}

/* Chrome/Safari “ghost text” fix */
.learn-face, .learn-face *{
  backface-visibility: hidden;
  -webkit-backface-visibility: hidden;
}

/* Faces */
.learn-front{ transform: rotateY(0deg) translateZ(1px); z-index: 2; }
.learn-back { transform: rotateY(180deg) translateZ(1px); z-index: 1; }

/* Make sure the correct face wins stacking when flipped */
.learn-card3d.is-flipped .learn-front{ z-index: 1; }
.learn-card3d.is-flipped .learn-back { z-index: 2; }

/* Only the visible face should be clickable */
.learn-card3d:not(.is-flipped) .learn-front{ pointer-events: auto; }
.learn-card3d:not(.is-flipped) .learn-back { pointer-events: none; }
.learn-card3d.is-flipped .learn-front{ pointer-events: none; }
.learn-card3d.is-flipped .learn-back { pointer-events: auto; }

/* Front text reveal animation */
.learn-front-text { transition: opacity 240ms ease, transform 240ms ease; }
.learn-front-text.is-hidden { opacity: 0; transform: translateY(6px); }

@media (prefers-reduced-motion: reduce) {
  .learn-card3d { transition: none; }
  .learn-front-text { transition: none; }
}


