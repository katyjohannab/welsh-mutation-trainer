<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="view-transition" content="same-origin" />
  <title>Hyffordwr Cymraeg | Home</title>

  <!-- Tailwind via CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Shared site styles -->
  <link rel="stylesheet" href="styles.css" />

  <!-- Fonts (match index.html) -->
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Abril+Fatface&family=Inconsolata:wght@200;300&family=Josefin+Sans:wght@300;400&family=Karla:wght@200;300;500;600&family=Merriweather:ital,wght@1,900&family=Poppins:ital,wght@0,100;0,200;0,400;1,100&family=Slabo+13px&family=Slabo+27px&family=Ultra&family=Yeseva+One&display=swap');

    html { font-family: Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Apple Color Emoji","Segoe UI Emoji"; }
    body { -webkit-font-smoothing: antialiased; }

    .feature-card { transition: transform 120ms ease, box-shadow 120ms ease; }
    .feature-card:focus-within, .feature-card:hover { transform: translateY(-1px); }

    .home-hero-title { color: var(--emerald-ink); }
  </style>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=BBH+Bogle&family=BBH+Hegarty&family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&family=Merriweather:ital,opsz,wght@0,18..144,300..900;1,18..144,300..900&family=Playfair+Display:ital,wght@0,400..900;1,400..900&family=Roboto+Slab:wght@100..900&family=Roboto:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
</head>

<body data-current="home" class="min-h-screen text-slate-900">
  <div id="app" class="min-h-screen flex flex-col text-[16px] md:text-[17px]">

    <!-- Navbar is injected from navbar.html by navbar.js -->
    <div id="navbarMount"></div>

    <main class="grow max-w-6xl mx-auto p-4 pb-24 md:pb-4 space-y-6">

      <!-- HERO -->
      <section class="panel rounded-2xl p-6 md:p-8">
        <div class="flex flex-col md:flex-row md:items-end md:justify-between gap-4">
          <div class="min-w-0 max-w-3xl">
            <div class="text-xs uppercase tracking-widest text-slate-500">
              <span data-lang="en">Croeso • Welcome</span>
              <span data-lang="cy" hidden>Croeso • Welcome</span>
            </div>

            <h2 class="mt-2 text-3xl md:text-4xl font-bold tracking-tight bbh-bogle-regular home-hero-title">
              <span data-lang="en">Hyffordwr Cymraeg</span>
              <span data-lang="cy" hidden>Hyffordwr Cymraeg</span>
            </h2>

            <p class="mt-3 text-slate-700 leading-relaxed" data-lang="en">
              Shwmae! I’m Katy. I’m currently learning Welsh at Uwch level, and I started building little tools to help me practise the bits I found hardest (especially mutations).
              They’ve genuinely helped my learning, so I’m sharing them here in case they’re useful for you too. Pick something below and have a play.
            </p>

            <p class="mt-3 text-slate-700 leading-relaxed" data-lang="cy" hidden>
              Shwmae! Katy dw i. Dw i’n ddysgwr Cymraeg ar lefel Uwch ar hyn o bryd, a dechreuais greu offerynnau bach i helpu fi ymarfer y pethau oedd yn anodd i mi (yn enwedig treigladau).
              Maen nhw wedi bod yn ddefnyddiol iawn i mi, felly dw i’n eu rhannu yma rhag ofn eu bod nhw’n helpu ti hefyd. Dewisa rywbeth isod a rho gynnig arni.
            </p>

            <div class="mt-5 flex flex-wrap gap-2">
              <a class="btn btn-primary" href="./index.html">
                <span data-lang="en">Start mutation trainer</span>
                <span data-lang="cy" hidden>Dechrau’r hyfforddwr treigladau</span>
              </a>
              <a class="btn btn-ghost" href="./learn.html">
                <span data-lang="en">Open mini lessons</span>
                <span data-lang="cy" hidden>Agor y gwersi bach</span>
              </a>
              <a class="btn btn-ghost" href="./vocab.html">
                <span data-lang="en">Open vocab trainer</span>
                <span data-lang="cy" hidden>Agor yr ymarfer geirfa</span>
              </a>
            </div>
          </div>

          <div class="flex flex-wrap gap-2">
            <span class="tag">
              <span data-lang="en">Mobile-friendly</span>
              <span data-lang="cy" hidden>Addas ar gyfer ffôn</span>
            </span>
            <span class="tag">
              <span data-lang="en">Keyboard support</span>
              <span data-lang="cy" hidden>Cefnogaeth bysellfwrdd</span>
            </span>
            <span class="tag">
              <span data-lang="en">Bilingual UI</span>
              <span data-lang="cy" hidden>Rhyngwyneb dwyieithog</span>
            </span>
          </div>
        </div>
      </section>

      <!-- FEATURE GRID -->
      <section class="grid sm:grid-cols-2 lg:grid-cols-3 gap-4" aria-label="Site sections">

        <!-- Mutation trainer -->
        <article class="panel rounded-2xl p-5 feature-card">
          <div class="flex items-start justify-between gap-3">
            <div class="min-w-0">
              <div class="text-xs uppercase tracking-widest text-slate-500">
                <span data-lang="en">Practice</span>
                <span data-lang="cy" hidden>Ymarfer</span>
              </div>
              <h3 class="mt-1 text-xl font-bold tracking-tight" style="color: var(--emerald-ink);">
                <span data-lang="en">Mutation trainer</span>
                <span data-lang="cy" hidden>Hyffordwr treigladau</span>
              </h3>
              <p class="mt-2 text-slate-700 leading-relaxed" data-lang="en">
                An interactive tool to help you practise mutations in lots of different contexts.
              </p>
              <p class="mt-2 text-slate-700 leading-relaxed" data-lang="cy" hidden>
                Offeryn rhyngweithiol i dy helpu di i ymarfer treigladau mewn llawer o gyd-destunau gwahanol.
              </p>
            </div>
            <span class="tag">Core</span>
          </div>
          <div class="mt-4 flex flex-wrap gap-2">
            <a class="btn btn-primary" href="./index.html">
              <span data-lang="en">Open</span><span data-lang="cy" hidden>Agor</span>
            </a>
            <a class="btn btn-ghost" href="./index.html#filters">
              <span data-lang="en">Filters</span><span data-lang="cy" hidden>Hidiau</span>
            </a>
          </div>
        </article>

        <!-- Lessons -->
        <article class="panel rounded-2xl p-5 feature-card">
          <div class="flex items-start justify-between gap-3">
            <div class="min-w-0">
              <div class="text-xs uppercase tracking-widest text-slate-500">
                <span data-lang="en">Learn</span>
                <span data-lang="cy" hidden>Dysgu</span>
              </div>
              <h3 class="mt-1 text-xl font-bold tracking-tight" style="color: var(--emerald-ink);">
                <span data-lang="en">Mini lessons</span>
                <span data-lang="cy" hidden>Gwersi bach</span>
              </h3>
              <p class="mt-2 text-slate-700 leading-relaxed" data-lang="en">
                A series of mini-lessons about grammar.
              </p>
              <p class="mt-2 text-slate-700 leading-relaxed" data-lang="cy" hidden>
                Cyfres o wersi bach am ramadeg Cymraeg.
              </p>
            </div>
            <span class="tag">Lessons</span>
          </div>
          <div class="mt-4 flex flex-wrap gap-2">
            <a class="btn btn-primary" href="./learn.html">
              <span data-lang="en">Open</span><span data-lang="cy" hidden>Agor</span>
            </a>
            <a class="btn btn-ghost" href="./learn.html?lesson=whistlestop&slide=1">
              <span data-lang="en">Quick tour</span><span data-lang="cy" hidden>Taith gyflym</span>
            </a>
          </div>
        </article>

        <!-- Vocab -->
        <article class="panel rounded-2xl p-5 feature-card">
          <div class="flex items-start justify-between gap-3">
            <div class="min-w-0">
              <div class="text-xs uppercase tracking-widest text-slate-500">
                <span data-lang="en">Vocab</span>
                <span data-lang="cy" hidden>Geirfa</span>
              </div>
              <h3 class="mt-1 text-xl font-bold tracking-tight" style="color: var(--emerald-ink);">
                <span data-lang="en">Vocab trainer</span>
                <span data-lang="cy" hidden>Ymarfer geirfa</span>
              </h3>
              <p class="mt-2 text-slate-700 leading-relaxed" data-lang="en">
                Aimed at Dysgu Cymraeg learners, this tool helps you learn key course vocabulary.
              </p>
              <p class="mt-2 text-slate-700 leading-relaxed" data-lang="cy" hidden>
                Wedi’i anelu at ddysgwyr Dysgu Cymraeg, mae’r offeryn hwn yn dy helpu di i ddysgu geirfa allweddol y cwrs.
              </p>
            </div>
            <span class="tag">Trainer</span>
          </div>
          <div class="mt-4 flex flex-wrap gap-2">
            <a class="btn btn-primary" href="./vocab.html">
              <span data-lang="en">Open</span><span data-lang="cy" hidden>Agor</span>
            </a>
          </div>
        </article>

        <!-- Coming soon -->
        <article class="panel rounded-2xl p-5 feature-card sm:col-span-2 lg:col-span-1">
          <div class="text-xs uppercase tracking-widest text-slate-500">
            <span data-lang="en">Coming soon</span>
            <span data-lang="cy" hidden>Yn dod yn fuan</span>
          </div>
          <h3 class="mt-1 text-xl font-bold tracking-tight" style="color: var(--emerald-ink);">
            <span data-lang="en">Grammar trainer</span>
            <span data-lang="cy" hidden>Ymarfer gramadeg</span>
          </h3>
          <p class="mt-2 text-slate-700 leading-relaxed" data-lang="en">
            Focused drills on “bod + yn”, relative clauses, and other high-frequency patterns.
          </p>
          <p class="mt-2 text-slate-700 leading-relaxed" data-lang="cy" hidden>
            Ymarferion ffocws ar “bod + yn”, cymalau perthynol, a phatrymau cyffredin eraill.
          </p>
          <div class="mt-4">
            <a class="btn btn-ghost" href="./learn.html">
              <span data-lang="en">Use lessons for now</span>
              <span data-lang="cy" hidden>Defnyddio’r gwersi am y tro</span>
            </a>
          </div>
        </article>

      </section>

    </main>

    <footer class="max-w-6xl mx-auto p-6 text-xs text-slate-500">
      <div class="flex flex-wrap gap-4 items-center">
        <span>© Hyffordwr Cymraeg</span>
        <button id="btnTop" class="ml-auto btn btn-ghost px-2 py-1">
          <span data-lang="en">Back to top</span>
          <span data-lang="cy" hidden>Yn ôl i’r brig</span>
        </button>
      </div>
    </footer>

  </div>

  <!-- Shared navbar loader -->
  <script src="./navbar.js"></script>

  <script>
    function wmGetLang(){
      const raw = localStorage.getItem("wm_lang");
      if (!raw) return "en";
      try {
        const v = JSON.parse(raw);
        return (v === "cy" || v === "en") ? v : "en";
      } catch (e) {
        return (raw === "cy" || raw === "en") ? raw : "en";
      }
    }

    function wmApplyLangToPage(){
      const lang = wmGetLang();
      document.documentElement.setAttribute("lang", lang === "cy" ? "cy" : "en");
      document.querySelectorAll("[data-lang]").forEach(el => {
        el.hidden = (el.getAttribute("data-lang") !== lang);
      });
    }

    async function wmFallbackInjectNavbar(){
      const mount = document.getElementById("navbarMount");
      if (!mount) return false;

      const candidates = [
        "./navbar.html",
        "https://katyjohannab.github.io/welsh-mutation-trainer/navbar.html"
      ];

      for (const url of candidates) {
        try {
          const res = await fetch(url, { cache: "no-cache" });
          if (!res.ok) throw new Error("HTTP " + res.status);
          mount.innerHTML = await res.text();
          return true;
        } catch (e) {}
      }
      console.warn("[Home] Could not load navbar.html from candidates.");
      return false;
    }

    // Back to top
    document.getElementById("btnTop")?.addEventListener("click", () => {
      window.scrollTo({ top: 0, behavior: "smooth" });
    });

    (async function boot(){
      // 1) Prefer your navbar.js implementation
      if (typeof window.loadNavbar === "function") {
        await window.loadNavbar();
      } else if (typeof window.initNavbar === "function") {
        await window.initNavbar();
      } else {
        // 2) Safety net so the navbar never “vanishes”
        await wmFallbackInjectNavbar();
      }

      // Apply language once navbar is mounted (also sets page lang attr)
      wmApplyLangToPage();
    })();

    // When navbar toggle changes wm_lang, re-apply bilingual blocks on home (don’t double-toggle)
    document.addEventListener("click", (e) => {
      const btn = e.target.closest?.("#btnLangToggle");
      if (!btn) return;
      setTimeout(wmApplyLangToPage, 0);
    });

    // Keep in sync across tabs
    window.addEventListener("storage", (e) => {
      if (e.key === "wm_lang") wmApplyLangToPage();
    });
  </script>
</body>
</html>



