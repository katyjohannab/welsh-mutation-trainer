<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="view-transition" content="same-origin" />
  <title>Hyffordwr Cymraeg | Home</title>

  <!-- Tailwind via CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Your shared site styles -->
  <link rel="stylesheet" href="styles.css" />

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=BBH+Bogle&family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap" rel="stylesheet">

  <style>
    html { font-family: Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Apple Color Emoji","Segoe UI Emoji"; }
    body { -webkit-font-smoothing: antialiased; }

    .bbh-bogle-regular{
      font-family: "BBH Bogle", Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Apple Color Emoji","Segoe UI Emoji";
      font-weight: 400;
      letter-spacing: -0.01em;
    }
    .bbh-bogle-bold{
      font-family: "BBH Bogle", Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Apple Color Emoji","Segoe UI Emoji";
      font-weight: 700;
      letter-spacing: -0.01em;
    }

    /* ‚Äúfeature card‚Äù polish not covered in styles.css */
    .feature-card { transition: transform 120ms ease, box-shadow 120ms ease; }
    .feature-card:focus-within, .feature-card:hover { transform: translateY(-1px); }
    .feature-meta { color: rgba(15,23,42,0.65); } /* slate-ish */
  </style>
</head>

<body data-current="home" class="min-h-screen text-slate-900">

  <!-- Shared navbar mounts here -->
  <div id="navbarMount"></div>

  <main class="max-w-6xl mx-auto px-4 py-6 md:py-10 space-y-6">

    <!-- HERO ROW (spans full width) -->
    <section class="panel rounded-2xl p-6 md:p-8">
      <div class="flex flex-col md:flex-row md:items-end md:justify-between gap-4">
        <div class="min-w-0 max-w-3xl">
          <div class="text-xs uppercase tracking-widest text-slate-500">Croeso ‚Ä¢ Welcome</div>

          <h2 class="mt-2 text-3xl md:text-4xl font-bold tracking-tight bbh-bogle-bold" style="color: var(--emerald-ink);">
            Hyffordwr Cymraeg
          </h2>

          <p class="mt-3 text-slate-700 leading-relaxed" data-lang="en">
           Shwmae! I‚Äôm Katy. I‚Äôm currently learning Welsh at Uwch level, and I started building little tools to help me practise the bits I found hardest (especially mutations). They‚Äôve genuinely helped my learning, so I‚Äôm sharing them here in case they‚Äôre useful for you too. Pick something below and have a play.
          </p>
          <p class="mt-3 text-slate-700 leading-relaxed" data-lang="cy" hidden>
            Shwmae! Katy dw i. Dw i‚Äôn ddysgwr Cymraeg ar lefel Uwch ar hyn o bryd, a dechreuais greu offerynnau bach i helpu fi ymarfer y pethau oedd yn anodd i mi (yn enwedig treigladau).
            Maen nhw wedi bod yn ddefnyddiol iawn i mi, felly dw i‚Äôn eu rhannu yma rhag ofn eu bod nhw‚Äôn helpu ti hefyd. Dewisa rywbeth isod a rho gynnig arni.
          </p>

          <div class="mt-5 flex flex-wrap gap-2">
            <a class="btn btn-primary" href="./index.html">Start mutation trainer</a>
            <a class="btn btn-ghost" href="./learn.html">Open mini lessons</a>
            <a class="btn btn-ghost" href="./vocab.html">Open vocab trainer</a>
          </div>
        </div>

        <div class="flex flex-wrap gap-2">
          <span class="tag">Mobile-friendly</span>
          <span class="tag">Keyboard support</span>
          <span class="tag">Bilingual UI</span>
        </div>
      </div>
    </section>

    <!-- FEATURE GRID -->
    <section class="grid sm:grid-cols-2 lg:grid-cols-3 gap-4" aria-label="Site sections">

      <!-- Mutation trainer -->
      <article class="panel rounded-2xl p-5 feature-card">
        <div class="flex items-start justify-between gap-3">
          <div class="min-w-0">
            <div class="text-xs uppercase tracking-widest text-slate-500">Practice</div>
            <h3 class="mt-1 text-xl font-bold tracking-tight" data-lang="en" style="color: var(--emerald-ink);">Mutation trainer</h3>
             <h3 class="mt-1 text-xl font-bold tracking-tight" data-lang="cy" hidden style="color: var(--emerald-ink);">Hyffordwr Treiglad</h3>
       <p class="mt-2 text-slate-700 leading-relaxed" data-lang="en">
        An interactive tool to help you practise mutations in lots of different contexts.
      </p>
      <p class="mt-2 text-slate-700 leading-relaxed" data-lang="cy" hidden>
        Offeryn rhyngweithiol i dy helpu di i ymarfer treigladau mewn llawer o gyd-destunau gwahanol.
      </p>
          </div>
          <span class="tag">Core</span>
        </div>
        <div class="mt-4 flex flex-wrap gap-2">
          <a class="btn btn-primary" href="./index.html">Open</a>
          <a class="btn btn-ghost" href="./index.html#filters">Filters</a>
        </div>
      </article>

      <!-- Learn -->
      <article class="panel rounded-2xl p-5 feature-card">
        <div class="flex items-start justify-between gap-3">
          <div class="min-w-0">
            <div class="text-xs uppercase tracking-widest text-slate-500">Learn</div>
            <h3 class="mt-1 text-xl font-bold tracking-tight" style="color: var(--emerald-ink);">Mini lessons</h3>
            <p class="mt-2 text-slate-700 leading-relaxed">
              Short explanations plus interactive checks. Build a mental model, then practise it.
            </p>
          </div>
          <span class="tag">Lessons</span>
        </div>
        <div class="mt-4 flex flex-wrap gap-2">
          <a class="btn btn-primary" href="./learn.html">Open</a>
          <a class="btn btn-ghost" href="./learn.html?lesson=whistlestop&slide=1">Start quick tour</a>
        </div>
      </article>

      <!-- Vocab -->
      <article class="panel rounded-2xl p-5 feature-card">
        <div class="flex items-start justify-between gap-3">
          <div class="min-w-0">
            <div class="text-xs uppercase tracking-widest text-slate-500">Vocab</div>
            <h3 class="mt-1 text-xl font-bold tracking-tight" style="color: var(--emerald-ink);">Vocab trainer</h3>
            <p class="mt-2 text-slate-700 leading-relaxed">
              Drill vocabulary from your CSV with filtering. Built for quick daily reps.
            </p>
          </div>
          <span class="tag">Trainer</span>
        </div>
        <div class="mt-4 flex flex-wrap gap-2">
          <a class="btn btn-primary" href="./vocab.html">Open</a>
        </div>
      </article>

      <!-- Optional: placeholder for future Grammar -->
      <article class="panel rounded-2xl p-5 feature-card sm:col-span-2 lg:col-span-1">
        <div class="text-xs uppercase tracking-widest text-slate-500">Coming soon</div>
        <h3 class="mt-1 text-xl font-bold tracking-tight" style="color: var(--emerald-ink);">Grammar trainer</h3>
        <p class="mt-2 text-slate-700 leading-relaxed">
          Focused drills on ‚Äúbod + yn‚Äù, relative clauses, and other high-frequency patterns. (Stub for now.)
        </p>
        <div class="mt-4 flex flex-wrap gap-2">
          <a class="btn btn-ghost" href="./learn.html">Use lessons for now</a>
        </div>
      </article>

    </section>

    <footer class="p-2 text-xs text-slate-500">
      <div class="flex flex-wrap gap-4 items-center">
        <span>¬© Hyffordwr Cymraeg</span>
        <a class="ml-auto btn btn-ghost px-2 py-1" href="#" id="btnTop">Back to top</a>
      </div>
    </footer>

  </main>

<script>
  // ---------- Navbar loader ----------
  async function loadNavbar() {
    const mount = document.getElementById('navbarMount');
    if (!mount) return false;

    const candidates = [
      './navbar.html',
      'https://katyjohannab.github.io/welsh-mutation-trainer/navbar.html'
    ];

    for (const url of candidates) {
      try {
        const res = await fetch(url, { cache: 'no-cache' });
        if (!res.ok) throw new Error('HTTP ' + res.status);
        mount.innerHTML = await res.text();
        return true;
      } catch (e) {}
    }
    console.warn('[Navbar] Could not load navbar.html from any candidate.');
    return false;
  }

  // ---------- Language helpers (ROBUST) ----------
  function wmGetLang(){
    const raw = localStorage.getItem('wm_lang');
    if (!raw) return 'en';
    try {
      const v = JSON.parse(raw);
      return (v === 'cy' || v === 'en') ? v : 'en';
    } catch (e) {
      return (raw === 'cy' || raw === 'en') ? raw : 'en';
    }
  }

  function wmSetLang(next){
    localStorage.setItem('wm_lang', JSON.stringify(next));
    document.documentElement.setAttribute('lang', next === 'cy' ? 'cy' : 'en');
  }

  function wmSyncLangToggleUI(){
    const btn = document.getElementById('btnLangToggle');
    if (!btn) return;
    const lang = wmGetLang();
    const nextLabel = (lang === 'en') ? 'CY' : 'EN';
    btn.innerHTML = `<span aria-hidden="true">üîÅ</span><span class="ml-1">${nextLabel}</span>`;
    btn.setAttribute('aria-label', (lang === 'en') ? 'Switch language to Cymraeg' : 'Switch language to English');
    btn.title = (lang === 'en') ? 'Switch to Cymraeg' : 'Switch to English';
  }

  function wmApplyLang(){
    const lang = wmGetLang();
    document.documentElement.setAttribute('lang', lang === 'cy' ? 'cy' : 'en');

    // Show only matching language blocks
    document.querySelectorAll('[data-lang]').forEach(el => {
      el.hidden = (el.getAttribute('data-lang') !== lang);
    });

    wmSyncLangToggleUI();
  }

  // ---------- Sticky header shadow ----------
  function wmInitStickyShadow(){
    const h = document.getElementById('siteHeader');
    if (!h) return;
    const set = () => h.classList.toggle('is-scrolled', window.scrollY > 8);
    window.addEventListener('scroll', set, { passive: true });
    set();
  }

  // ---------- Events ----------
  document.addEventListener('click', (e) => {
    const btn = e.target.closest && e.target.closest('#btnLangToggle');
    if (!btn) return;

    const next = (wmGetLang() === 'en') ? 'cy' : 'en';
    wmSetLang(next);
    wmApplyLang();
  });

  document.getElementById('btnTop')?.addEventListener('click', (e) => {
    e.preventDefault();
    window.scrollTo({ top: 0, behavior: 'smooth' });
  });

  // ---------- Boot ----------
  (async () => {
    await loadNavbar();
    wmApplyLang();        // crucial: runs AFTER navbar inject so nav labels + toggle update
    wmInitStickyShadow(); // gives sticky header separation
  })();
</script>

  
</body>
</html>


