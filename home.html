<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="view-transition" content="same-origin" />
  <title>Hyffordwr Cymraeg | Home</title>

  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="styles.css" />

  <style>
    @import url('https://fonts.googleapis.com/css2?family=Abril+Fatface&family=Inconsolata:wght@200;300&family=Josefin+Sans:wght@300;400&family=Karla:wght@200;300;500;600&family=Merriweather:ital,wght@1,900&family=Poppins:ital,wght@0,100;0,200;0,400;1,100&family=Slabo+13px&family=Slabo+27px&family=Ultra&family=Yeseva+One&display=swap');
    html { font-family: Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Apple Color Emoji","Segoe UI Emoji"; }
    body { -webkit-font-smoothing: antialiased; }

    .feature-card { transition: transform 120ms ease, box-shadow 120ms ease; }
    .feature-card:focus-within, .feature-card:hover { transform: translateY(-1px); }

    .home-hero-title { color: var(--emerald-ink); }
  </style>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=BBH+Bogle&family=BBH+Hegarty&family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&family=Merriweather:ital,opsz,wght@0,18..144,300..900;1,18..144,300..900&family=Playfair+Display:ital,wght@0,400..900;1,400..900&family=Roboto+Slab:wght@100..900&family=Roboto:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
</head>

<body data-current="home" class="min-h-screen text-slate-900">
  <div id="app" class="min-h-screen flex flex-col text-[16px] md:text-[17px]">

    <!-- Shared navbar mounts here -->
    <div id="navbarMount"></div>

    <main class="grow max-w-6xl mx-auto p-4 pb-24 md:pb-4 space-y-6">

      <!-- HERO -->
      <section class="panel rounded-2xl p-6 md:p-8">
        <div class="flex flex-col md:flex-row md:items-end md:justify-between gap-4">
          <div class="min-w-0 max-w-3xl">
            <div class="text-xs uppercase tracking-widest text-slate-500">
              <span data-lang="en">Croeso ‚Ä¢ Welcome</span>
              <span data-lang="cy" hidden>Croeso ‚Ä¢ Welcome</span>
            </div>

            <h2 class="mt-2 text-3xl md:text-4xl font-bold tracking-tight bbh-bogle-regular home-hero-title">
              <span data-lang="en">Hyffordwr Cymraeg</span>
              <span data-lang="cy" hidden>Hyffordwr Cymraeg</span>
            </h2>

            <p class="mt-3 text-slate-700 leading-relaxed" data-lang="en">
              Shwmae! I‚Äôm Katy. I‚Äôm currently learning Welsh at Uwch level, and I started building little tools to help me practise the bits I found hardest (especially mutations).
              They‚Äôve genuinely helped my learning, so I‚Äôm sharing them here in case they‚Äôre useful for you too. Pick something below and have a play.
            </p>
            <p class="mt-3 text-slate-700 leading-relaxed" data-lang="cy" hidden>
              Shwmae! Katy dw i. Dw i‚Äôn ddysgwr Cymraeg ar lefel Uwch ar hyn o bryd, a dechreuais greu offerynnau bach i helpu fi ymarfer y pethau oedd yn anodd i mi (yn enwedig treigladau).
              Maen nhw wedi bod yn ddefnyddiol iawn i mi, felly dw i‚Äôn eu rhannu yma rhag ofn eu bod nhw‚Äôn helpu ti hefyd. Dewisa rywbeth isod a rho gynnig arni.
            </p>

            <div class="mt-5 flex flex-wrap gap-2">
              <a class="btn btn-primary" href="./index.html">
                <span data-lang="en">Start mutation trainer</span>
                <span data-lang="cy" hidden>Dechrau‚Äôr hyfforddwr treigladau</span>
              </a>
              <a class="btn btn-ghost" href="./learn.html">
                <span data-lang="en">Open mini lessons</span>
                <span data-lang="cy" hidden>Agor y gwersi bach</span>
              </a>
              <a class="btn btn-ghost" href="./vocab.html">
                <span data-lang="en">Open vocab trainer</span>
                <span data-lang="cy" hidden>Agor yr ymarfer geirfa</span>
              </a>
            </div>
          </div>

          <div class="flex flex-wrap gap-2">
            <span class="tag">
              <span data-lang="en">Mobile-friendly</span>
              <span data-lang="cy" hidden>Addas ar gyfer ff√¥n</span>
            </span>
            <span class="tag">
              <span data-lang="en">Keyboard support</span>
              <span data-lang="cy" hidden>Cefnogaeth bysellfwrdd</span>
            </span>
            <span class="tag">
              <span data-lang="en">Bilingual UI</span>
              <span data-lang="cy" hidden>Rhyngwyneb dwyieithog</span>
            </span>
          </div>
        </div>
      </section>

      <!-- FEATURE GRID -->
      <section class="grid sm:grid-cols-2 lg:grid-cols-3 gap-4" aria-label="Site sections">

        <article class="panel rounded-2xl p-5 feature-card">
          <div class="flex items-start justify-between gap-3">
            <div class="min-w-0">
              <div class="text-xs uppercase tracking-widest text-slate-500">
                <span data-lang="en">Practice</span>
                <span data-lang="cy" hidden>Ymarfer</span>
              </div>
              <h3 class="mt-1 text-xl font-bold tracking-tight" style="color: var(--emerald-ink);">
                <span data-lang="en">Mutation trainer</span>
                <span data-lang="cy" hidden>Hyffordwr treigladau</span>
              </h3>
              <p class="mt-2 text-slate-700 leading-relaxed" data-lang="en">
                An interactive tool to help you practise mutations in lots of different contexts.
              </p>
              <p class="mt-2 text-slate-700 leading-relaxed" data-lang="cy" hidden>
                Offeryn rhyngweithiol i dy helpu di i ymarfer treigladau mewn llawer o gyd-destunau gwahanol.
              </p>
            </div>
            <span class="tag">Core</span>
          </div>
          <div class="mt-4 flex flex-wrap gap-2">
            <a class="btn btn-primary" href="./index.html"><span data-lang="en">Open</span><span data-lang="cy" hidden>Agor</span></a>
            <a class="btn btn-ghost" href="./index.html#filters"><span data-lang="en">Filters</span><span data-lang="cy" hidden>Hidiau</span></a>
          </div>
        </article>

        <article class="panel rounded-2xl p-5 feature-card">
          <div class="flex items-start justify-between gap-3">
            <div class="min-w-0">
              <div class="text-xs uppercase tracking-widest text-slate-500">
                <span data-lang="en">Learn</span>
                <span data-lang="cy" hidden>Dysgu</span>
              </div>
              <h3 class="mt-1 text-xl font-bold tracking-tight" style="color: var(--emerald-ink);">
                <span data-lang="en">Mini lessons</span>
                <span data-lang="cy" hidden>Gwersi bach</span>
              </h3>
              <p class="mt-2 text-slate-700 leading-relaxed" data-lang="en">
                A series of mini-lessons about grammar.
              </p>
              <p class="mt-2 text-slate-700 leading-relaxed" data-lang="cy" hidden>
                Cyfres o wersi bach am ramadeg Cymraeg.
              </p>
            </div>
            <span class="tag">Lessons</span>
          </div>
          <div class="mt-4 flex flex-wrap gap-2">
            <a class="btn btn-primary" href="./learn.html"><span data-lang="en">Open</span><span data-lang="cy" hidden>Agor</span></a>
            <a class="btn btn-ghost" href="./learn.html?lesson=whistlestop&slide=1"><span data-lang="en">Quick tour</span><span data-lang="cy" hidden>Taith gyflym</span></a>
          </div>
        </article>

        <article class="panel rounded-2xl p-5 feature-card">
          <div class="flex items-start justify-between gap-3">
            <div class="min-w-0">
              <div class="text-xs uppercase tracking-widest text-slate-500">
                <span data-lang="en">Vocab</span>
                <span data-lang="cy" hidden>Geirfa</span>
              </div>
              <h3 class="mt-1 text-xl font-bold tracking-tight" style="color: var(--emerald-ink);">
                <span data-lang="en">Vocab trainer</span>
                <span data-lang="cy" hidden>Ymarfer geirfa</span>
              </h3>
              <p class="mt-2 text-slate-700 leading-relaxed" data-lang="en">
                Aimed at Dysgu Cymraeg learners, this tool helps you learn key course vocabulary.
              </p>
              <p class="mt-2 text-slate-700 leading-relaxed" data-lang="cy" hidden>
                Wedi‚Äôi anelu at ddysgwyr Dysgu Cymraeg, mae‚Äôr offeryn hwn yn dy helpu di i ddysgu geirfa allweddol y cwrs.
              </p>
            </div>
            <span class="tag">Trainer</span>
          </div>
          <div class="mt-4 flex flex-wrap gap-2">
            <a class="btn btn-primary" href="./vocab.html"><span data-lang="en">Open</span><span data-lang="cy" hidden>Agor</span></a>
          </div>
        </article>

      </section>

      <footer class="max-w-6xl mx-auto p-6 text-xs text-slate-500">
        <div class="flex flex-wrap gap-4 items-center">
          <span>¬© Hyffordwr Cymraeg</span>
          <button id="btnTop" class="ml-auto btn btn-ghost px-2 py-1">
            <span data-lang="en">Back to top</span>
            <span data-lang="cy" hidden>Yn √¥l i‚Äôr brig</span>
          </button>
        </div>
      </footer>

    </main>
  </div>

  <script>
    /* ========= Utilities ========= */
    const $ = (sel, root = document) => root.querySelector(sel);
    function saveLS(k, v) { try { localStorage.setItem(k, JSON.stringify(v)); } catch (e) {} }
    function loadLS(k, d) { try { const r = localStorage.getItem(k); return r ? JSON.parse(r) : d; } catch (e) { return d; } }

    /* ========= Language ========= */
    const state = { lang: loadLS("wm_lang", "en") };

    function applyLangBlocks() {
      const lang = state.lang || "en";
      document.documentElement.setAttribute("lang", lang === "cy" ? "cy" : "en");
      document.querySelectorAll("[data-lang]").forEach(el => {
        el.hidden = (el.getAttribute("data-lang") !== lang);
      });
    }

    function syncLangToggleUI() {
      const btn = $("#btnLangToggle");
      if (!btn) return;
      const lang = state.lang || "en";
      const next = (lang === "en") ? "CY" : "EN";
      btn.innerHTML = `<span aria-hidden="true">üîÅ</span><span class="langtag">${next}</span>`;
      btn.title = (lang === "en") ? "Switch to Cymraeg" : "Switch to English";
      btn.setAttribute("aria-label", (lang === "en") ? "Switch language to Cymraeg" : "Switch language to English");
    }

    function syncNavLabels() {
      const lang = state.lang || "en";
      const set = (id, en, cy) => {
        const el = $(id);
        if (!el) return;
        el.textContent = (lang === "cy") ? cy : en;
      };
      set("#btnLearn", "Learn", "Dysgu");
      set("#btnPractice", "Practice", "Ymarfer");
      set("#btnStats", "Vocab", "Geirfa");
      set("#btnFilters", "Filters", "Hidiau");
      set("#btnBrowse", "Preps", "Ardd.");
      set("#btnHelp", "Tour", "Taith");
    }

    function wireLangToggleOnce() {
      const btn = $("#btnLangToggle");
      if (!btn) return;
      if (btn.dataset.wmBound === "1") return;
      btn.dataset.wmBound = "1";

      btn.addEventListener("click", () => {
        state.lang = (state.lang === "en") ? "cy" : "en";
        saveLS("wm_lang", state.lang);
        applyLangBlocks();
        syncNavLabels();
        syncLangToggleUI();
      });
    }

    /* ========= Sticky shadow helper (optional) ========= */
    function initStickyShadow() {
      const h = $("#siteHeader");
      if (!h) return;
      const set = () => h.classList.toggle("is-scrolled", window.scrollY > 8);
      window.addEventListener("scroll", set, { passive: true });
      set();
    }

    /* ========= Navbar mount ========= */
    async function mountNavbar() {
      const mount = $("#navbarMount");
      if (!mount) return;

      // If navbar.js already injected it, don‚Äôt double-load.
      if (mount.querySelector("#siteHeader")) return;

      const candidates = ["./navbar.html", "https://katyjohannab.github.io/welsh-mutation-trainer/navbar.html"];
      for (const url of candidates) {
        try {
          const res = await fetch(url, { cache: "no-cache" });
          if (!res.ok) throw new Error("HTTP " + res.status);
          mount.innerHTML = await res.text();
          break;
        } catch (e) {}
      }
    }

    /* ========= Boot ========= */
    (async function boot(){
      await mountNavbar();          // IMPORTANT: must happen before we query #btnLangToggle
      applyLangBlocks();            // toggles page content
      syncNavLabels();              // updates nav text (optional)
      syncLangToggleUI();           // renders üîÅ CY/EN into the button
      wireLangToggleOnce();         // binds click once
      initStickyShadow();           // optional shadow on scroll

      $("#btnTop")?.addEventListener("click", () => window.scrollTo({ top: 0, behavior: "smooth" }));
    })();
  </script>
</body>
</html>



